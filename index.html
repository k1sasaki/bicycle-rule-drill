<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªè»¢è»Šé’åˆ‡ç¬¦å¯¾ç­–ãƒ‰ãƒªãƒ« - ä½ã€…æœ¨ITç²—ç‰©åº—</title>
    <style>
        body { zoom: 0.8; font-family: sans-serif; text-align: center; background: #f0f0f0; margin: 0; padding: 20px; }
        #game-container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        
        /* ç”»é¢åˆ¶å¾¡ã®è¦ï¼šã“ã‚ŒãŒæ¶ˆãˆã¦ã„ãŸã®ãŒå‹•ã‹ãªã„ä¸»å› ã§ã™ */
        .hidden { display: none !important; }

        #description, #current-score {
            text-align: left;
            display: inline-block;
            width: 90%;
            margin-top: 10px;
        }
        #current-score { text-align: right; }

        .illust {
            width: 100%;
            max-width: 400px;
            height: 250px;
            object-fit: contain;
            border: 2px solid #333;
            border-radius: 8px;
            margin-bottom: 5px;
        }

        .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        
        /* å›ç­”ãƒœã‚¿ãƒ³ã®åŸºæœ¬ã‚¹ã‚¿ã‚¤ãƒ« */
        .btn-grid button { padding: 15px; font-size: 18px; cursor: pointer; border-radius: 5px; border: 1px solid #ddd; background: #fff; }
        .btn-grid button:hover { background: #e9e9e9; }

	/* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã‚’ç¸¦ç©ã¿ã®å¤§ããªãƒœã‚¿ãƒ³ã«ã™ã‚‹ */
	.nav-btn {
	    display: block;        /* ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‹ã‚‰ãƒ–ãƒ­ãƒƒã‚¯è¦ç´ ã«å¤‰æ›´ï¼ˆç¸¦ã«ä¸¦ã¶ï¼‰ */
	    width: 80%;            /* æ¨ªå¹…ã‚’å°‘ã—åºƒã‚ã« */
	    margin: 15px auto;     /* ä¸Šä¸‹ã®é–“éš”ã‚’åºƒã’ã€å·¦å³ä¸­å¤®ã«é…ç½® */
	    padding: 15px 24px;    /* æŠ¼ã—ã‚„ã™ã„ã‚ˆã†ã«å°‘ã—åšã */
	    font-size: 20px;       /* æ–‡å­—ã‚‚å°‘ã—å¤§ãã */
	    font-weight: bold;
	    border: none;
	    border-radius: 8px;
	    cursor: pointer;
	    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
	    transition: transform 0.1s, filter 0.2s;
	    background-color: #1e90ff;
	    color: white;
	    text-decoration: none; /* ã‚‚ã—ãƒªãƒ³ã‚¯ã«ã—ã¦ã‚‚å¤§ä¸ˆå¤«ãªã‚ˆã†ã« */
	}
        .nav-btn:active { transform: translateY(2px); box-shadow: 0 2px 3px rgba(0,0,0,0.1); }
        .nav-btn:hover { filter: brightness(1.1); }

        /* ãƒ©ãƒ³ã‚¯åˆ¥ã‚«ãƒ©ãƒ¼ */
        .btn-bronze { background-color: #CD7F32; color: white; }
        .btn-silver { background-color: #C0C0C0; color: #333; }
        .btn-gold { background-color: #FFD700; color: #000; border: 2px solid #DAA520; }

        /* åˆ¤å®šãƒ†ã‚­ã‚¹ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .is-correct { color: black; font-size: 2rem; font-weight: bold; }
        .is-wrong {
            color: #ff0000;
            font-size: 4.5rem; /* åº—ä¸»ã“ã ã‚ã‚Šï¼šç‰¹å¤§ã®æ®‹å¿µ */
            font-weight: 900;
            text-shadow: 2px 2px 5px rgba(0,0,0,0.3);
        }

        .softred { color: #ff6666; }
        .bold24 { font-size: 24px; font-weight: bold; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="start-screen">
        <h1>è‡ªè»¢è»Šé’åˆ‡ç¬¦å¯¾ç­–ãƒ‰ãƒªãƒ«</h1>
        <p>115ã‚‚ã‚ã‚‹é•åé …ç›®ã®ã€åå‰‡é‡‘é¡ã‚’å½“ã¦ã‚ˆã†ï¼</p>
	  <div>
	        <button class="nav-btn" onclick="startQuiz(10)">ãŠãŸã‚ã—(10å•)</button>
	        <button class="nav-btn btn-bronze" onclick="startQuiz(20)">ãƒ–ãƒ­ãƒ³ã‚º(20å•)</button>
	        <button class="nav-btn btn-silver" onclick="startQuiz(50)">ã‚·ãƒ«ãƒãƒ¼(50å•)</button>
	        <button class="nav-btn btn-gold" onclick="startQuiz('all')">â˜…ã‚´ãƒ¼ãƒ«ãƒ‰(å…¨å•)â˜…</button>            
	  </div>
    </div>

    <div id="quiz-screen" class="hidden">
        <h3 id="question-info"></h3>
        <img id="q-image" class="illust" src="" alt="æŒ¿çµµ">
        <div id="mongon" class="softred bold24"></div>
        <div>ã“ã®é•åã®åå‰‡é‡‘ã¯ï¼Ÿ</div>
        <div class="btn-grid">
            <button onclick="checkAnswer('2,000')">2,000å††</button>
            <button onclick="checkAnswer('3,000')">3,000å††</button>
            <button onclick="checkAnswer('5,000')">5,000å††</button>
            <button onclick="checkAnswer('6,000')">6,000å††</button>
            <button onclick="checkAnswer('12,000')">12,000å††</button>
            <button onclick="checkAnswer('ç½°å‰‡')">ç½°å‰‡(èµ¤åˆ‡ç¬¦)</button>
        </div>
    </div>

    <div id="result-screen" class="hidden">
        <h1 id="judgement"></h1>
        <p id="mongon2" class="softred bold24"></p>
        <p id="correct-amount" class="bold24"></p>
        <p id="description"></p>
        <button class="nav-btn" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸</button>
        <p id="current-score"></p>
    </div>

    <div id="final-screen" class="hidden">
        <h2>çµ‚äº†ï¼</h2>
        <p id="score-display"></p>
        <button class="nav-btn" onclick="location.reload()">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦</button>
        <p style="margin-top:20px; font-size:0.8em;">produced by ä½ã€…æœ¨ITç²—ç‰©åº—</p>
    </div>
    
	<hr style="margin-top: 30px; border: 0; border-top: 1px solid #eee;">
	    <footer id="global-footer">
	        <a href="https://sites.google.com/view/sasakipeoplewareworks/" target="_blank" class="footer-link">
	            ğŸ“¦ ä½ã€…æœ¨ITç²—ç‰©åº—ã¸ãƒ»ãƒ»ãƒ»
	        </a>
	    </footer>    
</div>

<script>
    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let volume = 0;
    let allData = [];

    // èµ·å‹•æ™‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€
    async function loadData() {
        try {
            const response = await fetch('data.json');
            if (!response.ok) throw new Error('ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
            allData = await response.json();
            console.log("å…¨" + allData.length + "é …ç›®ã®èª­ã¿è¾¼ã¿å®Œäº†ï¼");
        } catch (error) {
            console.error("ã‚¨ãƒ©ãƒ¼:", error);
            alert("ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");
        }
    }
    window.onload = loadData;

    function startQuiz(vol) {
        if (vol === 'all') {
            volume = allData.length;
        } else {
            volume = vol;
        }
        // ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦æŠ½å‡º
        currentQuestions = [...allData].sort(() => 0.5 - Math.random()).slice(0, volume);
        currentIndex = 0;
        score = 0;
        showQuestion();
    }

    function showQuestion() {
        const q = currentQuestions[currentIndex];
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        
        document.getElementById('question-info').innerText = `ç¬¬ ${currentIndex + 1}/${volume} å•`;
        document.getElementById('q-image').src = `img/${q.number}.jpg`;
        document.getElementById('mongon').innerText = q.title;
    }

    function checkAnswer(answer) {
        const q = currentQuestions[currentIndex];
        const isCorrect = (answer === q.amount);
        if(isCorrect) score++;

        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');

        const judgeElement = document.getElementById('judgement');
        judgeElement.innerText = isCorrect ? "æ­£è§£ï¼" : "æ®‹å¿µï¼";
        
        // ã‚¯ãƒ©ã‚¹ã®ä»˜ã‘æ›¿ãˆ
        judgeElement.className = isCorrect ? "is-correct" : "is-wrong";

        document.getElementById('mongon2').innerText = `${q.title}`;
        document.getElementById('correct-amount').innerText = `åå‰‡é‡‘ï¼š${q.amount}${q.amount === 'ç½°å‰‡' ? '' : 'å††'}`;
        document.getElementById('description').innerText = `${q.article} : ${q.description}`;
        document.getElementById('current-score').innerText = `æ­£è§£æ•° ${score} / ${currentIndex + 1}`;
    }

    function nextQuestion() {
        currentIndex++;
        if(currentIndex < volume) {
            showQuestion();
        } else {
            showFinalResult();
        }
    }

    function showFinalResult() {
        document.getElementById('result-screen').classList.add('hidden');
        document.getElementById('final-screen').classList.remove('hidden');
        document.getElementById('score-display').innerText = `${volume}å•ä¸­ ${score}å• æ­£è§£ã§ã—ãŸï¼`;
    }
</script>
</body>

</html>
